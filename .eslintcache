[{"/Users/gaoshaoyun/workspace/react/template/src/App.js":"1","/Users/gaoshaoyun/workspace/react/template/src/index.js":"2","/Users/gaoshaoyun/workspace/react/template/src/utils/index.js":"3","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts":"4","/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js":"5","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/index.js":"6","/Users/gaoshaoyun/workspace/react/template/src/layouts/Content/index.js":"7","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/ContextMenu/index.js":"8","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index.js":"9","/Users/gaoshaoyun/workspace/react/template/src/layouts/EditCmp/index.js":"10","/Users/gaoshaoyun/workspace/react/template/src/layouts/hooks/index.js":"11","/Users/gaoshaoyun/workspace/react/template/src/components/ImgComponent/index.js":"12","/Users/gaoshaoyun/workspace/react/template/src/components/TextComponent/index.js":"13","/Users/gaoshaoyun/workspace/react/template/src/components/ButtonComponent/index.js":"14","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/Img/index.js":"15","/Users/gaoshaoyun/workspace/react/template/src/Context.js":"16","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/menus.js":"17","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/AddCmpWrapper/index.js":"18"},{"size":887,"mtime":1612255369383,"results":"19","hashOfConfig":"20"},{"size":141,"mtime":1612237580805,"results":"21","hashOfConfig":"20"},{"size":856,"mtime":1612237769793,"results":"22","hashOfConfig":"20"},{"size":40,"mtime":1611819738716,"results":"23","hashOfConfig":"20"},{"size":3392,"mtime":1612253934430,"results":"24","hashOfConfig":"20"},{"size":1673,"mtime":1612255199631,"results":"25","hashOfConfig":"20"},{"size":3520,"mtime":1612254154751,"results":"26","hashOfConfig":"20"},{"size":777,"mtime":1612254965819,"results":"27","hashOfConfig":"20"},{"size":4768,"mtime":1612255366171,"results":"28","hashOfConfig":"20"},{"size":4318,"mtime":1612250471177,"results":"29","hashOfConfig":"20"},{"size":218,"mtime":1612237706152,"results":"30","hashOfConfig":"20"},{"size":188,"mtime":1612238073587,"results":"31","hashOfConfig":"20"},{"size":264,"mtime":1612238092345,"results":"32","hashOfConfig":"20"},{"size":272,"mtime":1612238285841,"results":"33","hashOfConfig":"20"},{"size":1300,"mtime":1612253493808,"results":"34","hashOfConfig":"20"},{"size":80,"mtime":1612250052983,"results":"35","hashOfConfig":"20"},{"size":1187,"mtime":1612250780760,"results":"36","hashOfConfig":"20"},{"size":780,"mtime":1612253705518,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1iz1bfu",{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/gaoshaoyun/workspace/react/template/src/App.js",["77","78","79"],"/Users/gaoshaoyun/workspace/react/template/src/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/utils/index.js",["80"],"export function getOnlyKey() {\n  return Math.random();\n}\n\n// 规范style，如传入的lineHeight只是数字，没有px，则这里加上\nexport function formatStyle(style, noNeedPos) {\n  let newStyle = {...style};\n\n  newStyle = checkPx(newStyle, [\"lineHeight\", \"fontSize\"]);\n\n  delete newStyle.top;\n  delete newStyle.right;\n  delete newStyle.bottom;\n  delete newStyle.left;\n\n  return newStyle;\n}\n\nfunction checkPx(newStyle, names) {\n  names.map((name) => {\n    if (newStyle[name] && (newStyle[name] + \"\").indexOf(\"px\") === -1) {\n      newStyle[name] = newStyle[name] + \"px\";\n    }\n  });\n  return newStyle;\n}\n\n// 节流， 默认500ms\nexport function throttle(func, wait = 500) {\n  let timer = 0;\n  return (...args) => {\n    if (timer) {\n      return;\n    }\n    timer = window.setTimeout(() => {\n      func(...args);\n      timer = 0;\n    }, wait);\n  };\n}\n","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts",[],"/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Content/index.js",["81"],"import {useEffect, useRef, useState, useContext} from \"react\";\nimport {\n  isButtonComponent,\n  isImgComponent,\n  isTextComponent,\n} from \"../Cmps/menus\";\nimport Draggable from \"../Draggable\";\nimport EditCmp from \"../EditCmp\";\nimport styles from \"./index.less\";\n// 画布组件\nimport TextComponent from \"../../components/TextComponent\";\nimport ButtonComponent from \"../../components/ButtonComponent\";\nimport ImgComponent from \"../../components/ImgComponent\";\nimport {CanvasContext} from \"../../Context\";\n\nfunction getCmp(cmp) {\n  const {data} = cmp;\n  let res = null;\n  switch (data.type) {\n    case isTextComponent:\n      res = <TextComponent {...data} />;\n      break;\n    case isButtonComponent:\n      res = <ButtonComponent {...data} />;\n      break;\n    case isImgComponent:\n      res = <ImgComponent {...data} />;\n      break;\n    default:\n      res = null;\n  }\n  return res;\n}\n\nfunction Content(props) {\n  // 所有组件\n  const globalCanvas = useContext(CanvasContext);\n\n  const cmps = globalCanvas.getCmps();\n\n  // 当前选中的组件\n  const selectedCmp = globalCanvas.getSelectedCmp();\n\n  // 画布的位置，\n  const [canvasPos, setCanvasPos] = useState(null);\n\n  const canvasRef = useRef();\n\n  console.log(\"cmps\", cmps); //sy-log\n\n  useEffect(() => {\n    // 记录画布的位置，因为最终记录的位置是基于画布计算出来的相对位置\n    const canvasPos = canvasRef.current.getBoundingClientRect();\n    setCanvasPos(canvasPos);\n  }, []);\n\n  const handleDragEnter = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const handleDragLeave = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // 新增的组件\n    let addingCmp = e.dataTransfer.getData(\"add-component\");\n\n    let top, left;\n    if (addingCmp) {\n      // 拖拽进来新增的组件\n      addingCmp = JSON.parse(addingCmp);\n      top = e.pageY - canvasPos.top - 15;\n      left = e.pageX - canvasPos.left - 40;\n      let resData = {\n        ...addingCmp,\n        data: {\n          ...addingCmp.data,\n          style: {\n            ...addingCmp.data.style,\n            top,\n            left,\n          },\n        },\n      };\n      globalCanvas.addCmp(resData);\n    } else {\n      // 拖拽画布内的组件\n      let startPos = e.dataTransfer.getData(\"startPos\");\n      startPos = JSON.parse(startPos);\n\n      let disX = e.pageX - startPos.startX;\n      let disY = e.pageY - startPos.startY;\n\n      top = selectedCmp.data.style.top + disY;\n      left = selectedCmp.data.style.left + disX;\n      globalCanvas.updateSelectedCmpStyle({top, left});\n    }\n  };\n\n  return (\n    <div className={styles.main}>\n      <div\n        className={styles.canvas}\n        ref={canvasRef}\n        onDragEnter={handleDragEnter}\n        onDragOver={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        // 点击画布非组件区域的时候，取消选中的组件\n        onClick={() => {\n          globalCanvas.setSelectedCmp(null);\n        }}>\n        {canvasRef.current &&\n          cmps.map((cmp, index) => {\n            return cmp.data ? (\n              <Draggable\n                index={index}\n                cmp={cmp}\n                key={cmp.onlyKey}\n                selected={(selectedCmp && selectedCmp.onlyKey) === cmp.onlyKey}>\n                {getCmp(cmp)}\n              </Draggable>\n            ) : null;\n          })}\n      </div>\n    </div>\n  );\n}\nexport default Content;\n","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/ContextMenu/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/EditCmp/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/hooks/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/ImgComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/TextComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/ButtonComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/Img/index.js",["82"],"import AddCmpWrapper from \"../AddCmpWrapper\";\n\nconst imgs = [\n  {\n    src:\n      \"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1333208373,3297678241&fm=26&gp=0.jpg\",\n  },\n  {\n    src:\n      \"https://img.tusij.com/ips_asset/15/92/20/82/17/0c/0cd90db0a695dbd3e3863fc91966f9e5.png!l800_i_w?auth_key=1638115200-0-0-b0ffe9b4a1b908c00614751f80c5576a\",\n  },\n  {\n    src:\n      \"https://img.tusij.com/ips_asset/15/92/20/82/17/07/075b0e0118f23549ce0e700676e45191.png!l800_i_w?auth_key=1638115200-0-0-6bcef5430a7fef147606bfd7e6776a72\",\n  },\n\n  {\n    src:\n      \"https://img.tusij.com/ips_asset/15/92/20/82/17/81/812e08e2157d0fb0021cb376f3abdf89.png!l800_i_w?auth_key=1638115200-0-0-934ab0fcf8ac0d630994dfaa68d02736\",\n  },\n\n  {\n    src:\n      \"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F16%2F11%2F13%2F8585e08ac31d512b393b31d42b0898b2.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1614839119&t=aaf4ce9c2acf4de51fc6a2ffa1072b42\",\n  },\n];\n\nfunction Img({baseCmp}) {\n  return (\n    <>\n      {imgs.map((item, index) => (\n        <AddCmpWrapper key={\"img\" + index} baseCmp={baseCmp} value={item.src}>\n          <img src={item.src} />\n        </AddCmpWrapper>\n      ))}\n    </>\n  );\n}\nexport default Img;\n","/Users/gaoshaoyun/workspace/react/template/src/Context.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/menus.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/AddCmpWrapper/index.js",[],{"ruleId":"83","severity":1,"message":"84","line":1,"column":26,"nodeType":"85","messageId":"86","endLine":1,"endColumn":35},{"ruleId":"83","severity":1,"message":"87","line":1,"column":37,"nodeType":"85","messageId":"86","endLine":1,"endColumn":43},{"ruleId":"83","severity":1,"message":"88","line":1,"column":45,"nodeType":"85","messageId":"86","endLine":1,"endColumn":53},{"ruleId":"89","severity":1,"message":"90","line":20,"column":20,"nodeType":"91","messageId":"92","endLine":20,"endColumn":22},{"ruleId":"83","severity":1,"message":"93","line":8,"column":8,"nodeType":"85","messageId":"86","endLine":8,"endColumn":15},{"ruleId":"94","severity":1,"message":"95","line":33,"column":11,"nodeType":"96","endLine":33,"endColumn":33},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'useRef' is defined but never used.","'useState' is defined but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'EditCmp' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement"]