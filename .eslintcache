[{"/Users/gaoshaoyun/workspace/react/template/src/App.js":"1","/Users/gaoshaoyun/workspace/react/template/src/index.js":"2","/Users/gaoshaoyun/workspace/react/template/src/utils/index.js":"3","/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js":"4","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/index.js":"5","/Users/gaoshaoyun/workspace/react/template/src/layouts/Content/index.js":"6","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/ContextMenu/index.js":"7","/Users/gaoshaoyun/workspace/react/template/src/layouts/hooks/index.js":"8","/Users/gaoshaoyun/workspace/react/template/src/components/ImgComponent/index.js":"9","/Users/gaoshaoyun/workspace/react/template/src/components/TextComponent/index.js":"10","/Users/gaoshaoyun/workspace/react/template/src/components/ButtonComponent/index.js":"11","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/Img/index.js":"12","/Users/gaoshaoyun/workspace/react/template/src/Context.js":"13","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/menus.js":"14","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/AddCmpWrapper/index.js":"15","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index tem.js":"16","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index.js":"17","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts":"18","/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCanvas/index.js":"19","/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCmp/index.js":"20","/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/index.js":"21","/Users/gaoshaoyun/workspace/react/template/src/layouts/Header/index.js":"22"},{"size":849,"mtime":1612779924435,"results":"23","hashOfConfig":"24"},{"size":141,"mtime":1612766558590,"results":"25","hashOfConfig":"24"},{"size":1440,"mtime":1613294098895,"results":"26","hashOfConfig":"24"},{"size":7199,"mtime":1612929130714,"results":"27","hashOfConfig":"24"},{"size":1831,"mtime":1612766620560,"results":"28","hashOfConfig":"24"},{"size":3048,"mtime":1613294220179,"results":"29","hashOfConfig":"24"},{"size":777,"mtime":1612254965819,"results":"30","hashOfConfig":"24"},{"size":218,"mtime":1612509225281,"results":"31","hashOfConfig":"24"},{"size":280,"mtime":1613273269183,"results":"32","hashOfConfig":"24"},{"size":264,"mtime":1612238092345,"results":"33","hashOfConfig":"24"},{"size":272,"mtime":1612928167792,"results":"34","hashOfConfig":"24"},{"size":2218,"mtime":1612773708280,"results":"35","hashOfConfig":"24"},{"size":80,"mtime":1612250052983,"results":"36","hashOfConfig":"24"},{"size":1227,"mtime":1612756264044,"results":"37","hashOfConfig":"24"},{"size":780,"mtime":1612693470520,"results":"38","hashOfConfig":"24"},{"size":4768,"mtime":1612667771715,"results":"39","hashOfConfig":"24"},{"size":7876,"mtime":1613294188148,"results":"40","hashOfConfig":"24"},{"size":40,"mtime":1612766506563,"results":"41","hashOfConfig":"24"},{"size":2334,"mtime":1612863383532,"results":"42","hashOfConfig":"24"},{"size":4083,"mtime":1612863375583,"results":"43","hashOfConfig":"24"},{"size":889,"mtime":1613292987672,"results":"44","hashOfConfig":"24"},{"size":1005,"mtime":1612924085391,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1iz1bfu",{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/gaoshaoyun/workspace/react/template/src/App.js",[],"/Users/gaoshaoyun/workspace/react/template/src/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/utils/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/index.js",["93","94"],"import {useState, useEffect, useContext} from \"react\";\nimport {CanvasContext} from \"../../Context\";\nimport {getContainerDom} from \"../../utils\";\nimport Img from \"./Img\";\nimport styles from \"./index.less\";\nimport {\n  isImgComponent,\n  isTextComponent,\n  isButtonComponent,\n  menus,\n} from \"./menus\";\nimport classnames from \"classnames\";\n\nexport default function Cmps(props) {\n  const globalCanvas = useContext(CanvasContext);\n\n  const [list, setList] = useState(null);\n  const handleDragStart = (e, cmp) => {\n    if (cmp.data.type === isImgComponent) {\n      return;\n    }\n    e.dataTransfer.setData(\"add-component\", JSON.stringify(cmp));\n  };\n\n  const handleClick = (e, cmp) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (\n      cmp.data.type === isTextComponent ||\n      cmp.data.type === isButtonComponent\n    ) {\n      globalCanvas.addCmp(cmp);\n      return;\n    }\n    // 图片组件\n    if (list) {\n      setList(null);\n    } else {\n      let l = null;\n      switch (cmp.data.type) {\n        case isImgComponent:\n          l = <Img baseCmp={cmp} />;\n          break;\n        default:\n          l = null;\n      }\n      setList(l);\n    }\n  };\n\n  return (\n    <div className={styles.main}>\n      <div className={styles.cmpList}>\n        {menus.map((item) => (\n          <div\n            key={item.desc}\n            className={styles.cmp}\n            draggable={item.data.type !== isImgComponent}\n            onDragStart={(e) => handleDragStart(e, item)}\n            onClick={(e) => handleClick(e, item)}>\n            {item.desc}\n          </div>\n        ))}\n      </div>\n      {list && (\n        <button\n          className={classnames(\"iconfont icon-close\", styles.close)}\n          onClick={() => setList(null)}></button>\n      )}\n      {list && <ul className={styles.detailList}> {list}</ul>}\n    </div>\n  );\n}\n","/Users/gaoshaoyun/workspace/react/template/src/layouts/Content/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/ContextMenu/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/hooks/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/ImgComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/TextComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/ButtonComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/Img/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/Context.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/menus.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/AddCmpWrapper/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index tem.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index.js",["95","96"],"import {Component} from \"react\";\nimport {CanvasContext} from \"../../Context\";\nimport {debounce} from \"../../utils\";\nimport ContextMenu from \"./ContextMenu\";\nimport {\n  isButtonComponent,\n  isImgComponent,\n  isTextComponent,\n} from \"../Cmps/menus\";\n// 画布组件\nimport TextComponent from \"../../components/TextComponent\";\nimport ButtonComponent from \"../../components/ButtonComponent\";\nimport ImgComponent from \"../../components/ImgComponent\";\nimport classnames from \"classnames\";\nimport styles from \"./index.less\";\n\n// setSelectCmp 选中的组件\n// selected 是否是选中的组件，选中的组件加橙色标记边框\nexport default class Draggable extends Component {\n  static contextType = CanvasContext;\n  constructor(props, context) {\n    super(props);\n    this.state = {showContextMenu: false};\n  }\n\n  componentDidMount() {\n    document\n      .getElementById(\"root\")\n      .addEventListener(\"click\", this.setShowContextMenu);\n    // 注册组件\n    this.unregisterCmpsEntity = this.context.registerCmpsEntity(\n      this.context.getCmp(this.props.index).onlyKey,\n      this\n    );\n  }\n\n  componentWillUnmount() {\n    document\n      .getElementById(\"root\")\n      .removeEventListener(\"click\", this.setShowContextMenu);\n\n    this.unregisterCmpsEntity();\n  }\n\n  onStoreChange = () => {\n    this.forceUpdate();\n  };\n\n  setShowContextMenu = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    this.state.showContextMenu && this.setState({showContextMenu: false});\n  };\n\n  handleMouseDown = (e, direction) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cmp = this.context.getCmp(this.props.index);\n\n    let startX = e.pageX;\n    let startY = e.pageY;\n\n    const move = (e) => {\n      let x = e.pageX;\n      let y = e.pageY;\n\n      let disX = x - startX;\n      let disY = y - startY;\n      let newStyle = {};\n\n      if (direction) {\n        if (direction.indexOf(\"top\") >= 0) {\n          disY = 0 - disY;\n          newStyle.top = cmp.data.style.top - disY;\n        }\n\n        if (direction.indexOf(\"left\") >= 0) {\n          disX = 0 - disX;\n          newStyle.left = cmp.data.style.left - disX;\n        }\n      }\n\n      // 特别频繁改变，加上一个标记，\n      debounce(\n        this.context.updateSelectedCmpStyle(\n          {\n            ...newStyle,\n            width: cmp.data.style.width + disX,\n            height: cmp.data.style.height + disY,\n          },\n          \"frequently\"\n        )\n      );\n    };\n\n    const up = () => {\n      document.removeEventListener(\"mousemove\", move);\n      document.removeEventListener(\"mouseup\", up);\n      this.context.recordCanvasChangeHistory();\n    };\n\n    document.addEventListener(\"mousemove\", move);\n    document.addEventListener(\"mouseup\", up);\n  };\n\n  handleDragStart = (e) => {\n    this.setActive(e);\n    let pageX = e.pageX;\n    let pageY = e.pageY;\n    e.dataTransfer.setData(\"startPos\", JSON.stringify({pageX, pageY}));\n  };\n\n  setActive = (e) => {\n    e.stopPropagation();\n    const selectCmp = this.context.getSelectedCmp();\n    const cmp = this.context.getCmp(this.props.index);\n\n    this.context.setSelectedCmp(cmp);\n  };\n\n  handleContextMenu = (e) => {\n    e.preventDefault();\n    this.setState({showContextMenu: true});\n  };\n\n  handleMouseDownofRotate = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const {getCmp, updateSelectedCmpStyle} = this.context;\n\n    const cmp = getCmp(this.props.index);\n\n    let startX = e.pageX;\n    let startY = e.pageY;\n\n    const move = (e) => {\n      let x = e.pageX;\n      let y = e.pageY;\n\n      let disX = x - startX;\n      let disY = y - startY;\n\n      const deg = (360 * Math.atan2(disY, disX)) / (2 * Math.PI);\n\n      // 特别频繁改变，加上一个标记，\n      debounce(\n        updateSelectedCmpStyle(\n          {\n            transform: `rotate(${deg}deg)`,\n          },\n          \"frequently\"\n        )\n      );\n    };\n\n    const up = () => {\n      document.removeEventListener(\"mousemove\", move);\n      document.removeEventListener(\"mouseup\", up);\n      this.context.recordCanvasChangeHistory();\n    };\n\n    document.addEventListener(\"mousemove\", move);\n    document.addEventListener(\"mouseup\", up);\n  };\n\n  render() {\n    const {index} = this.props;\n\n    const globalCanvas = this.context;\n\n    const cmp = globalCanvas.getCmp(this.props.index);\n\n    const selectCmp = globalCanvas.getSelectedCmp();\n\n    const selected = selectCmp && selectCmp.onlyKey === cmp.onlyKey;\n\n    const {showContextMenu} = this.state;\n\n    const {style} = cmp.data;\n\n    const top = style.top - 4;\n    const left = style.left - 4;\n    const width = style.width,\n      height = style.height;\n\n    return (\n      <>\n        <div\n          className={\n            styles.main + \" \" + (selected ? \"selected\" : styles.unselected)\n          }\n          style={{...style, zIndex: index}}\n          draggable={true}\n          onDragStart={this.handleDragStart}\n          onClick={this.setActive}\n          onContextMenu={this.handleContextMenu}>\n          {getComponent(cmp)}\n        </div>\n        {selected && (\n          <ul\n            className={styles.stretch}\n            style={{transform: `rotate${style.transform}`}}>\n            <li\n              className={classnames(styles.rotate, \"iconfont icon-xuanzhuan\")}\n              style={{\n                top: top - 20,\n                left: left + width / 2,\n              }}\n              onMouseDown={this.handleMouseDownofRotate}\n            />\n            <li\n              className={styles.stretchDot}\n              style={{top, left}}\n              onMouseDown={(e) => this.handleMouseDown(e, \"top left\")}\n            />\n            <li\n              className={styles.stretchDot}\n              style={{\n                top,\n                left: left + width / 2,\n              }}\n              onMouseDown={(e) => this.handleMouseDown(e, \"top\")}\n            />\n            <li\n              className={styles.stretchDot}\n              style={{top, left: left + width + 2}}\n              onMouseDown={(e) => this.handleMouseDown(e, \"top right\")}\n            />\n            <li\n              style={{\n                top: top + height / 2,\n                left: left + width + 2,\n              }}\n              onMouseDown={this.handleMouseDown}\n            />\n            <li\n              className={styles.stretchDot}\n              style={{\n                top: top + height + 2,\n                left: left + width + 2,\n              }}\n              onMouseDown={this.handleMouseDown}\n            />\n            <li\n              className={styles.stretchDot}\n              style={{\n                top: top + height + 2,\n                left: left + width / 2,\n              }}\n              onMouseDown={this.handleMouseDown}\n            />\n            <li\n              className={styles.stretchDot}\n              style={{\n                top: top + height + 2,\n                left,\n              }}\n              onMouseDown={(e) => this.handleMouseDown(e, \"bottom left\")}\n            />\n            <li\n              className={styles.stretchDot}\n              style={{\n                top: top + height / 2,\n                left,\n              }}\n              onMouseDown={(e) => this.handleMouseDown(e, \"left\")}\n            />\n          </ul>\n        )}\n        {showContextMenu && (\n          <ContextMenu\n            index={index}\n            pos={{top: style.top + 10, left: style.left + 60}}\n            cmp={cmp}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nfunction getComponent(cmp) {\n  const {data} = cmp;\n  let res = null;\n  switch (data.type) {\n    case isTextComponent:\n      res = <TextComponent {...data} />;\n      break;\n    case isButtonComponent:\n      res = <ButtonComponent {...data} />;\n      break;\n    case isImgComponent:\n      res = <ImgComponent {...data} />;\n      break;\n    default:\n      res = null;\n  }\n  return res;\n}\n","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCanvas/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCmp/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/index.js",["97","98"],"import {Component} from \"react\";\nimport {CanvasContext} from \"../../Context\";\nimport EditCanvas from \"./EditCanvas\";\nimport EditCmp from \"./EditCmp\";\nimport styles from \"./index.less\";\n\nexport default class Edit extends Component {\n  static contextType = CanvasContext;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showIndex: 0,\n    };\n  }\n  onStoreChange = () => {\n    this.forceUpdate();\n  };\n\n  componentDidMount() {\n    this.unregister = this.context.registerStoreChangeCmps(this);\n  }\n\n  componentWillUnmount() {\n    this.unregister();\n  }\n\n  render() {\n    const selectedCmp = this.context.getSelectedCmp();\n    const {showIndex} = this.state;\n    return selectedCmp ? (\n      <EditCmp\n        {...this.props}\n        selectedCmp={selectedCmp}\n        globalCanvas={this.context}\n      />\n    ) : (\n      <EditCanvas globalCanvas={this.context} />\n    );\n  }\n}\n","/Users/gaoshaoyun/workspace/react/template/src/layouts/Header/index.js",[],{"ruleId":"99","severity":1,"message":"100","line":1,"column":19,"nodeType":"101","messageId":"102","endLine":1,"endColumn":28},{"ruleId":"99","severity":1,"message":"103","line":3,"column":9,"nodeType":"101","messageId":"102","endLine":3,"endColumn":24},{"ruleId":"99","severity":1,"message":"104","line":116,"column":11,"nodeType":"101","messageId":"102","endLine":116,"endColumn":20},{"ruleId":"99","severity":1,"message":"105","line":133,"column":11,"nodeType":"101","messageId":"102","endLine":133,"endColumn":14},{"ruleId":"99","severity":1,"message":"106","line":5,"column":8,"nodeType":"101","messageId":"102","endLine":5,"endColumn":14},{"ruleId":"99","severity":1,"message":"107","line":30,"column":12,"nodeType":"101","messageId":"102","endLine":30,"endColumn":21},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'getContainerDom' is defined but never used.","'selectCmp' is assigned a value but never used.","'cmp' is assigned a value but never used.","'styles' is defined but never used.","'showIndex' is assigned a value but never used."]