[{"/Users/gaoshaoyun/workspace/react/template/src/App.js":"1","/Users/gaoshaoyun/workspace/react/template/src/index.js":"2","/Users/gaoshaoyun/workspace/react/template/src/utils/index.js":"3","/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js":"4","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/index.js":"5","/Users/gaoshaoyun/workspace/react/template/src/layouts/Content/index.js":"6","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/ContextMenu/index.js":"7","/Users/gaoshaoyun/workspace/react/template/src/layouts/hooks/index.js":"8","/Users/gaoshaoyun/workspace/react/template/src/components/ImgComponent/index.js":"9","/Users/gaoshaoyun/workspace/react/template/src/components/TextComponent/index.js":"10","/Users/gaoshaoyun/workspace/react/template/src/components/ButtonComponent/index.js":"11","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/Img/index.js":"12","/Users/gaoshaoyun/workspace/react/template/src/Context.js":"13","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/menus.js":"14","/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/AddCmpWrapper/index.js":"15","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index tem.js":"16","/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index.js":"17","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts":"18","/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCanvas/index.js":"19","/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCmp/index.js":"20","/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/index.js":"21"},{"size":849,"mtime":1612779924435,"results":"22","hashOfConfig":"23"},{"size":141,"mtime":1612766558590,"results":"24","hashOfConfig":"23"},{"size":1003,"mtime":1612773212703,"results":"25","hashOfConfig":"23"},{"size":5284,"mtime":1612781588796,"results":"26","hashOfConfig":"23"},{"size":1831,"mtime":1612766620560,"results":"27","hashOfConfig":"23"},{"size":2908,"mtime":1612780897340,"results":"28","hashOfConfig":"23"},{"size":777,"mtime":1612254965819,"results":"29","hashOfConfig":"23"},{"size":218,"mtime":1612509225281,"results":"30","hashOfConfig":"23"},{"size":188,"mtime":1612238073587,"results":"31","hashOfConfig":"23"},{"size":264,"mtime":1612238092345,"results":"32","hashOfConfig":"23"},{"size":272,"mtime":1612238285841,"results":"33","hashOfConfig":"23"},{"size":2218,"mtime":1612773708280,"results":"34","hashOfConfig":"23"},{"size":80,"mtime":1612250052983,"results":"35","hashOfConfig":"23"},{"size":1227,"mtime":1612756264044,"results":"36","hashOfConfig":"23"},{"size":780,"mtime":1612693470520,"results":"37","hashOfConfig":"23"},{"size":4768,"mtime":1612667771715,"results":"38","hashOfConfig":"23"},{"size":6425,"mtime":1612769433822,"results":"39","hashOfConfig":"23"},{"size":40,"mtime":1612766506563,"results":"40","hashOfConfig":"23"},{"size":2334,"mtime":1612780234094,"results":"41","hashOfConfig":"23"},{"size":4083,"mtime":1612771446178,"results":"42","hashOfConfig":"23"},{"size":762,"mtime":1612771637176,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1iz1bfu",{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"88"},"/Users/gaoshaoyun/workspace/react/template/src/App.js",[],"/Users/gaoshaoyun/workspace/react/template/src/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/utils/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/index.js",["89","90"],"import {useState, useEffect, useContext} from \"react\";\nimport {CanvasContext} from \"../../Context\";\nimport {getContainerDom} from \"../../utils\";\nimport Img from \"./Img\";\nimport styles from \"./index.less\";\nimport {\n  isImgComponent,\n  isTextComponent,\n  isButtonComponent,\n  menus,\n} from \"./menus\";\nimport classnames from \"classnames\";\n\nexport default function Cmps(props) {\n  const globalCanvas = useContext(CanvasContext);\n\n  const [list, setList] = useState(null);\n  const handleDragStart = (e, cmp) => {\n    if (cmp.data.type === isImgComponent) {\n      return;\n    }\n    e.dataTransfer.setData(\"add-component\", JSON.stringify(cmp));\n  };\n\n  const handleClick = (e, cmp) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (\n      cmp.data.type === isTextComponent ||\n      cmp.data.type === isButtonComponent\n    ) {\n      globalCanvas.addCmp(cmp);\n      return;\n    }\n    // 图片组件\n    if (list) {\n      setList(null);\n    } else {\n      let l = null;\n      switch (cmp.data.type) {\n        case isImgComponent:\n          l = <Img baseCmp={cmp} />;\n          break;\n        default:\n          l = null;\n      }\n      setList(l);\n    }\n  };\n\n  return (\n    <div className={styles.main}>\n      <div className={styles.cmpList}>\n        {menus.map((item) => (\n          <div\n            key={item.desc}\n            className={styles.cmp}\n            draggable={item.data.type !== isImgComponent}\n            onDragStart={(e) => handleDragStart(e, item)}\n            onClick={(e) => handleClick(e, item)}>\n            {item.desc}\n          </div>\n        ))}\n      </div>\n      {list && (\n        <button\n          className={classnames(\"iconfont icon-close\", styles.close)}\n          onClick={() => setList(null)}></button>\n      )}\n      {list && <ul className={styles.detailList}> {list}</ul>}\n    </div>\n  );\n}\n","/Users/gaoshaoyun/workspace/react/template/src/layouts/Content/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/ContextMenu/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/hooks/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/ImgComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/TextComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/ButtonComponent/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/Img/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/Context.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/menus.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Cmps/AddCmpWrapper/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index tem.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Draggable/index.js",["91"],"import {Component} from \"react\";\nimport {CanvasContext} from \"../../Context\";\nimport {throttle} from \"../../utils\";\nimport ContextMenu from \"./ContextMenu\";\nimport {\n  isButtonComponent,\n  isImgComponent,\n  isTextComponent,\n} from \"../Cmps/menus\";\n// 画布组件\nimport TextComponent from \"../../components/TextComponent\";\nimport ButtonComponent from \"../../components/ButtonComponent\";\nimport ImgComponent from \"../../components/ImgComponent\";\nimport styles from \"./index.less\";\n\n// setSelectCmp 选中的组件\n// selected 是否是选中的组件，选中的组件加橙色标记边框\nexport default class Draggable extends Component {\n  static contextType = CanvasContext;\n  constructor(props, context) {\n    super(props);\n    this.state = {showContextMenu: false};\n  }\n\n  componentDidMount() {\n    document\n      .getElementById(\"root\")\n      .addEventListener(\"click\", this.setShowContextMenu);\n    // 注册组件\n    this.unregisterCmpsEntity = this.context.registerCmpsEntity(\n      this.context.getCmp(this.props.index).onlyKey,\n      this\n    );\n  }\n\n  componentWillUnmount() {\n    document\n      .getElementById(\"root\")\n      .removeEventListener(\"click\", this.setShowContextMenu);\n\n    this.unregisterCmpsEntity();\n  }\n\n  onStoreChange = () => {\n    this.forceUpdate();\n  };\n\n  setShowContextMenu = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    this.state.showContextMenu && this.setState({showContextMenu: false});\n  };\n\n  handleMouseDown = (e, direction) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cmp = this.context.getCmp(this.props.index);\n\n    let startX = e.pageX;\n    let startY = e.pageY;\n\n    const move = (e) => {\n      let x = e.pageX;\n      let y = e.pageY;\n\n      let disX = x - startX;\n      let disY = y - startY;\n      let newStyle = {};\n\n      if (direction) {\n        if (direction.indexOf(\"top\") >= 0) {\n          disY = 0 - disY;\n          newStyle.top = cmp.data.style.top - disY;\n        }\n\n        if (direction.indexOf(\"left\") >= 0) {\n          disX = 0 - disX;\n          newStyle.left = cmp.data.style.left - disX;\n        }\n      }\n\n      throttle(\n        this.context.updateSelectedCmpStyle({\n          ...newStyle,\n          width: cmp.data.style.width + disX,\n          height: cmp.data.style.height + disY,\n        })\n      );\n    };\n\n    const up = () => {\n      document.removeEventListener(\"mousemove\", move);\n      document.removeEventListener(\"mouseup\", up);\n    };\n\n    document.addEventListener(\"mousemove\", move);\n    document.addEventListener(\"mouseup\", up);\n  };\n\n  handleDragStart = (e) => {\n    this.setActive(e);\n    let pageX = e.pageX;\n    let pageY = e.pageY;\n    e.dataTransfer.setData(\"startPos\", JSON.stringify({pageX, pageY}));\n  };\n\n  setActive = (e) => {\n    e.stopPropagation();\n    const selectCmp = this.context.getSelectedCmp();\n    const cmp = this.context.getCmp(this.props.index);\n    // if (selectCmp === null || selectCmp.onlyKey !== cmp.onlyKey) {\n\n    this.context.setSelectedCmp(cmp);\n  };\n\n  handleContextMenu = (e) => {\n    e.preventDefault();\n    this.setState({showContextMenu: true});\n  };\n\n  render() {\n    const {index} = this.props;\n\n    const globalCanvas = this.context;\n\n    const cmp = globalCanvas.getCmp(this.props.index);\n\n    const selectCmp = globalCanvas.getSelectedCmp();\n\n    const selected = selectCmp && selectCmp.onlyKey === cmp.onlyKey;\n\n    const {showContextMenu} = this.state;\n\n    const {style} = cmp.data;\n\n    const top = style.top - 4;\n    const left = style.left - 4;\n    const width = style.width,\n      height = style.height;\n\n    return (\n      <>\n        <div\n          className={\n            styles.main + \" \" + (selected ? \"selected\" : styles.unselected)\n          }\n          style={{...style, zIndex: index}}\n          draggable={true}\n          onDragStart={this.handleDragStart}\n          onClick={this.setActive}\n          onContextMenu={this.handleContextMenu}>\n          {getComponent(cmp)}\n        </div>\n        {selected && (\n          <ul className={styles.stretch}>\n            <li\n              className=\"top left\"\n              style={{top, left}}\n              onMouseDown={(e) => this.handleMouseDown(e, \"top left\")}\n            />\n            <li\n              className=\"top\"\n              style={{\n                top,\n                left: left + width / 2,\n              }}\n              onMouseDown={(e) => this.handleMouseDown(e, \"top\")}\n            />\n            <li\n              className=\"top right\"\n              style={{top, left: left + width + 2}}\n              onMouseDown={(e) => this.handleMouseDown(e, \"top right\")}\n            />\n            <li\n              className=\"right\"\n              style={{\n                top: top + height / 2,\n                left: left + width + 2,\n              }}\n              onMouseDown={this.handleMouseDown}\n            />\n            <li\n              className=\"bottom right\"\n              style={{\n                top: top + height + 2,\n                left: left + width + 2,\n              }}\n              onMouseDown={this.handleMouseDown}\n            />\n            <li\n              className=\"bottom\"\n              style={{\n                top: top + height + 2,\n                left: left + width / 2,\n              }}\n              onMouseDown={this.handleMouseDown}\n            />\n            <li\n              className=\"bottom left\"\n              style={{\n                top: top + height + 2,\n                left,\n              }}\n              onMouseDown={(e) => this.handleMouseDown(e, \"bottom left\")}\n            />\n            <li\n              className=\"left\"\n              style={{\n                top: top + height / 2,\n                left,\n              }}\n              onMouseDown={(e) => this.handleMouseDown(e, \"left\")}\n            />\n          </ul>\n        )}\n        {showContextMenu && (\n          <ContextMenu\n            index={index}\n            pos={{top: style.top + 10, left: style.left + 60}}\n            cmp={cmp}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nfunction getComponent(cmp) {\n  const {data} = cmp;\n  let res = null;\n  switch (data.type) {\n    case isTextComponent:\n      res = <TextComponent {...data} />;\n      break;\n    case isButtonComponent:\n      res = <ButtonComponent {...data} />;\n      break;\n    case isImgComponent:\n      res = <ImgComponent {...data} />;\n      break;\n    default:\n      res = null;\n  }\n  return res;\n}\n","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCanvas/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/EditCmp/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/layouts/Edit/index.js",["92"],"import {Component} from \"react\";\nimport {CanvasContext} from \"../../Context\";\nimport EditCanvas from \"./EditCanvas\";\nimport EditCmp from \"./EditCmp\";\nimport styles from \"./index.less\";\n\nexport default class Edit extends Component {\n  static contextType = CanvasContext;\n  onStoreChange = () => {\n    this.forceUpdate();\n  };\n\n  componentDidMount() {\n    this.unregister = this.context.registerStoreChangeCmps(this);\n  }\n\n  componentWillUnmount() {\n    this.unregister();\n  }\n\n  render() {\n    const selectedCmp = this.context.getSelectedCmp();\n\n    return selectedCmp ? (\n      <EditCmp\n        {...this.props}\n        selectedCmp={selectedCmp}\n        globalCanvas={this.context}\n      />\n    ) : (\n      <EditCanvas globalCanvas={this.context} />\n    );\n  }\n}\n",{"ruleId":"93","severity":1,"message":"94","line":1,"column":19,"nodeType":"95","messageId":"96","endLine":1,"endColumn":28},{"ruleId":"93","severity":1,"message":"97","line":3,"column":9,"nodeType":"95","messageId":"96","endLine":3,"endColumn":24},{"ruleId":"93","severity":1,"message":"98","line":110,"column":11,"nodeType":"95","messageId":"96","endLine":110,"endColumn":20},{"ruleId":"93","severity":1,"message":"99","line":5,"column":8,"nodeType":"95","messageId":"96","endLine":5,"endColumn":14},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'getContainerDom' is defined but never used.","'selectCmp' is assigned a value but never used.","'styles' is defined but never used."]