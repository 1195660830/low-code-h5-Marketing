[{"/Users/gaoshaoyun/workspace/react/template/src/App.js":"1","/Users/gaoshaoyun/workspace/react/template/src/index.js":"2","/Users/gaoshaoyun/workspace/react/template/src/components/Cmps/index.js":"3","/Users/gaoshaoyun/workspace/react/template/src/components/index.js":"4","/Users/gaoshaoyun/workspace/react/template/src/components/Content/index.js":"5","/Users/gaoshaoyun/workspace/react/template/src/components/Text/index.js":"6","/Users/gaoshaoyun/workspace/react/template/src/components/Draggable/index.js":"7","/Users/gaoshaoyun/workspace/react/template/src/utils/index.js":"8","/Users/gaoshaoyun/workspace/react/template/src/components/Demo/index.js":"9","/Users/gaoshaoyun/workspace/react/template/src/components/Button/index.js":"10","/Users/gaoshaoyun/workspace/react/template/src/components/hooks/index.js":"11","/Users/gaoshaoyun/workspace/react/template/src/components/EditCmp/index.js":"12","/Users/gaoshaoyun/workspace/react/template/src/components/Draggable/ContextMenu/index.js":"13","/Users/gaoshaoyun/workspace/react/template/src/components/Img/index.js":"14","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts":"15","/Users/gaoshaoyun/workspace/react/template/src/components/Context/index.js":"16","/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js":"17"},{"size":420,"mtime":1610594422355,"results":"18","hashOfConfig":"19"},{"size":179,"mtime":1612177770161,"results":"20","hashOfConfig":"19"},{"size":1686,"mtime":1611820281077,"results":"21","hashOfConfig":"19"},{"size":97,"mtime":1609225627631,"results":"22","hashOfConfig":"19"},{"size":3863,"mtime":1612177752954,"results":"23","hashOfConfig":"19"},{"size":255,"mtime":1610443433398,"results":"24","hashOfConfig":"19"},{"size":4659,"mtime":1612177390522,"results":"25","hashOfConfig":"19"},{"size":1079,"mtime":1612169227469,"results":"26","hashOfConfig":"19"},{"size":6586,"mtime":1609404706900,"results":"27","hashOfConfig":"19"},{"size":263,"mtime":1612163422596,"results":"28","hashOfConfig":"19"},{"size":262,"mtime":1612177811522,"results":"29","hashOfConfig":"19"},{"size":4315,"mtime":1612177845671,"results":"30","hashOfConfig":"19"},{"size":774,"mtime":1612176574513,"results":"31","hashOfConfig":"19"},{"size":220,"mtime":1611818018451,"results":"32","hashOfConfig":"19"},{"size":40,"mtime":1611819738716,"results":"33","hashOfConfig":"19"},{"size":80,"mtime":1612174125526,"results":"34","hashOfConfig":"19"},{"size":3096,"mtime":1612177711214,"results":"35","hashOfConfig":"19"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38"},"1iz1bfu",{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79"},"/Users/gaoshaoyun/workspace/react/template/src/App.js",["80"],"import {useState} from \"react\";\nimport styles from \"./App.less\";\nimport Cmps from \"./components/Cmps\";\nimport Content from \"./components/Content\";\n\nfunction App() {\n  // const [cmpToAdd, setAddCmp] = useState(null);\n  // let cmpToAdd = null;\n  // const setAddCmp = (v) => {\n  //   cmpToAdd = v;\n  // };\n  return (\n    <div className={styles.main}>\n      <Cmps />\n      <Content />\n    </div>\n  );\n}\n\nexport default App;\n","/Users/gaoshaoyun/workspace/react/template/src/index.js",["81"],"import ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","/Users/gaoshaoyun/workspace/react/template/src/components/Cmps/index.js",["82"],"import styles from \"./index.less\";\n\nexport const TextComponent = 0;\nexport const ButtonComponent = 1;\nexport const ImgComponent = 2;\n\nconst commomStyle = {};\n\nexport const menus = [\n  {\n    desc: \"文本\",\n    data: {\n      type: TextComponent,\n      value: \"文本\",\n      style: {\n        top: 1,\n        left: 0,\n        width: 80,\n        height: 30,\n        lineHeight: 30,\n        fontSize: 12,\n        color: \"#ff0000\",\n        backgroundColor: \"#f5deb3\",\n        textAlign: \"left\",\n        borderRadius: \"0%\",\n      },\n    },\n  },\n  {\n    desc: \"按钮\",\n    data: {\n      type: ButtonComponent,\n      value: \"按钮\",\n      style: {\n        top: 0,\n        left: 0,\n        width: 80,\n        height: 30,\n        lineHeight: 30,\n        fontSize: 12,\n        color: \"#ff0000\",\n        backgroundColor: \"#f5deb3\",\n        textAlign: \"left\",\n        borderRadius: \"0%\",\n      },\n    },\n  },\n  {\n    desc: \"图片\",\n    data: {\n      type: ImgComponent,\n      value:\n        \"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1333208373,3297678241&fm=26&gp=0.jpg\", // 图片地址\n      style: {\n        top: 0,\n        left: 0,\n        width: 200,\n        height: 100,\n        borderRadius: \"0%\",\n      },\n    },\n  },\n];\n\nexport default function Cmps(props) {\n  const handleDragStart = (e, data) => {\n    e.dataTransfer.setData(\"add-component\", JSON.stringify(data));\n  };\n\n  return (\n    <div className={styles.main}>\n      {menus.map((item) => (\n        <span\n          key={item.desc}\n          className={styles.cmp}\n          draggable=\"true\"\n          onDragStart={(e) => handleDragStart(e, item)}>\n          {item.desc}\n        </span>\n      ))}\n    </div>\n  );\n}\n","/Users/gaoshaoyun/workspace/react/template/src/components/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/Content/index.js",["83","84","85"],"import {useEffect, useReducer, useRef, useState} from \"react\";\nimport {getOnlyKey, useForceUpdate} from \"../../utils\";\nimport {useCanvas} from \"../../store/globalCanvas\";\nimport Button from \"../Button\";\nimport {ButtonComponent, ImgComponent, TextComponent} from \"../Cmps/index\";\nimport {CanvasContext} from \"../Context\";\nimport Draggable from \"../Draggable\";\nimport EditCmp from \"../EditCmp\";\nimport Img from \"../Img\";\nimport Text from \"../Text\";\nimport styles from \"./index.less\";\n\nfunction getCmp(cmp) {\n  const {data} = cmp;\n  let res = null;\n  switch (data.type) {\n    case TextComponent:\n      res = <Text {...data} />;\n      break;\n    case ButtonComponent:\n      res = <Button {...data} />;\n      break;\n    case ImgComponent:\n      res = <Img {...data} />;\n  }\n  return res;\n}\n\nfunction Content(props) {\n  const forceUpdate = useForceUpdate();\n\n  // 所有组件\n  const globalCanvas = useCanvas();\n  const cmps = globalCanvas.getCmps();\n\n  useEffect(() => {\n    const unsubscribe = globalCanvas.subscribe(() => {\n      forceUpdate();\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  // 当前选中的组件\n\n  const selectedCmp = globalCanvas.getSelectedCmp();\n\n  // 画布的位置，\n  const [canvasPos, setCanvasPos] = useState(null);\n\n  const canvasRef = useRef();\n\n  console.log(\"cmps\", cmps); //sy-log\n\n  useEffect(() => {\n    // 记录画布的位置，因为最终记录的位置是基于画布计算出来的相对位置\n    const canvasPos = canvasRef.current.getBoundingClientRect();\n    setCanvasPos(canvasPos);\n  }, []);\n\n  const handleDragEnter = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const handleDragLeave = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // 新增的组件\n    let addingCmp = e.dataTransfer.getData(\"add-component\");\n\n    let top, left;\n    if (addingCmp) {\n      // 拖拽进来新增的组件\n      addingCmp = JSON.parse(addingCmp);\n      top = e.pageY - canvasPos.top - 15;\n      left = e.pageX - canvasPos.left - 40;\n      let resData = {\n        ...addingCmp,\n        onlyKey: getOnlyKey(),\n        data: {\n          ...addingCmp.data,\n          style: {\n            ...addingCmp.data.style,\n            top,\n            left,\n          },\n        },\n      };\n      globalCanvas.addCmp(resData);\n    } else {\n      // 拖拽画布内的组件\n      let resData = {...selectedCmp};\n      let startPos = e.dataTransfer.getData(\"startPos\");\n      startPos = JSON.parse(startPos);\n\n      let disX = e.pageX - startPos.startX;\n      let disY = e.pageY - startPos.startY;\n\n      top = resData.data.style.top + disY;\n      left = resData.data.style.left + disX;\n      globalCanvas.updateSelectedCmpStyle({top, left});\n    }\n  };\n\n  return (\n    <CanvasContext.Provider value={globalCanvas}>\n      <div className={styles.main}>\n        <div\n          className={styles.canvas}\n          ref={canvasRef}\n          onDragEnter={handleDragEnter}\n          onDragOver={handleDragEnter}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n          // 点击画布非组件区域的时候，取消选中的组件\n          onClick={() => {\n            globalCanvas.setSelectedCmp(null);\n          }}>\n          {canvasRef.current &&\n            cmps.map((cmp, index) => {\n              return cmp.data ? (\n                <Draggable\n                  index={index}\n                  cmp={cmp}\n                  key={cmp.onlyKey}\n                  selected={\n                    (selectedCmp && selectedCmp.onlyKey) === cmp.onlyKey\n                  }>\n                  {getCmp(cmp)}\n                </Draggable>\n              ) : null;\n            })}\n        </div>\n        <EditCmp />\n      </div>\n    </CanvasContext.Provider>\n  );\n}\nexport default Content;\n","/Users/gaoshaoyun/workspace/react/template/src/components/Text/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/Draggable/index.js",["86"],"import {useState, useEffect, useContext} from \"react\";\nimport {throttle} from \"../../utils\";\nimport {CanvasContext} from \"../Context\";\nimport ContextMenu from \"./ContextMenu\";\nimport styles from \"./index.less\";\n\n// setSelectCmp 选中的组件\n// selected 是否是选中的组件，选中的组件加橙色标记边框\nexport default function Draggable({\n  index,\n  children,\n  cmp,\n  // setSelectCmp,\n  selected,\n}) {\n  const globalCanvas = useContext(CanvasContext);\n\n  const [showContextMenu, setShowContextMenu] = useState(false);\n  const {style} = cmp.data;\n\n  const setActive = (e) => {\n    e.stopPropagation();\n    globalCanvas.setSelectedCmp(cmp);\n  };\n\n  const handleContextMenu = (e) => {\n    e.preventDefault();\n    setShowContextMenu(true);\n  };\n\n  useEffect(() => {\n    document.getElementById(\"root\").addEventListener(\"click\", () => {\n      // 点击非组件区域的时候，取消选中的组件\n      // showContextMenu &&\n      setShowContextMenu(false);\n    });\n  }, []);\n\n  const top = style.top - 4;\n  const left = style.left - 4;\n  const width = style.width,\n    height = style.height;\n\n  const handleMouseDown = (e, direction) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    let startX = e.pageX;\n    let startY = e.pageY;\n\n    const target = e.target;\n\n    const move = (e) => {\n      let x = e.pageX;\n      let y = e.pageY;\n\n      let disX = x - startX;\n      let disY = y - startY;\n      let newStyle = {};\n\n      if (direction) {\n        if (direction.indexOf(\"top\") >= 0) {\n          disY = 0 - disY;\n          newStyle.top = cmp.data.style.top - disY;\n        }\n\n        if (direction.indexOf(\"left\") >= 0) {\n          disX = 0 - disX;\n          newStyle.left = cmp.data.style.left - disX;\n        }\n      }\n\n      throttle(\n        globalCanvas.updateSelectedCmpStyle({\n          width: cmp.data.style.width + disX,\n          height: cmp.data.style.height + disY,\n        })\n      );\n    };\n\n    const up = () => {\n      document.removeEventListener(\"mousemove\", move);\n      document.removeEventListener(\"mouseup\", up);\n    };\n\n    document.addEventListener(\"mousemove\", move);\n    document.addEventListener(\"mouseup\", up);\n  };\n\n  const handleDragStart = (e) => {\n    setActive(e);\n    let startX = e.pageX;\n    let startY = e.pageY;\n    e.dataTransfer.setData(\"startPos\", JSON.stringify({startX, startY}));\n  };\n\n  return (\n    <>\n      <div\n        className={\n          styles.main + \" \" + (selected ? \"selected\" : styles.unselected)\n        }\n        style={{...style, zIndex: index}}\n        draggable={true}\n        //onDragStart={setActive}\n        onDragStart={handleDragStart}\n        //onMouseDown={handleCmpMouseDown}\n        onClick={setActive}\n        onContextMenu={handleContextMenu}>\n        {children}\n      </div>\n      {selected && (\n        <ul className={styles.stretch}>\n          <li\n            className=\"top left\"\n            style={{top, left}}\n            onMouseDown={(e) => handleMouseDown(e, \"top left\")}\n          />\n          <li\n            className=\"top\"\n            style={{\n              top,\n              left: left + width / 2,\n            }}\n            onMouseDown={(e) => handleMouseDown(e, \"top\")}\n          />\n          <li\n            className=\"top right\"\n            style={{top, left: left + width + 2}}\n            onMouseDown={(e) => handleMouseDown(e, \"top right\")}\n          />\n          <li\n            className=\"right\"\n            style={{\n              top: top + height / 2,\n              left: left + width + 2,\n            }}\n            onMouseDown={handleMouseDown}\n          />\n          <li\n            className=\"bottom right\"\n            style={{\n              top: top + height + 2,\n              left: left + width + 2,\n            }}\n            onMouseDown={handleMouseDown}\n          />\n          <li\n            className=\"bottom\"\n            style={{\n              top: top + height + 2,\n              left: left + width / 2,\n            }}\n            onMouseDown={handleMouseDown}\n          />\n          <li\n            className=\"bottom left\"\n            style={{\n              top: top + height + 2,\n              left,\n            }}\n            onMouseDown={(e) => handleMouseDown(e, \"bottom left\")}\n          />\n          <li\n            className=\"left\"\n            style={{\n              top: top + height / 2,\n              left,\n            }}\n            onMouseDown={(e) => handleMouseDown(e, \"left\")}\n          />\n        </ul>\n      )}\n      {showContextMenu && (\n        <ContextMenu\n          index={index}\n          pos={{top: style.top + 10, left: style.left + 60}}\n          cmp={cmp}\n        />\n      )}\n    </>\n  );\n}\n","/Users/gaoshaoyun/workspace/react/template/src/utils/index.js",["87","88"],"import {useCallback, useState} from \"react\";\n\nexport function getOnlyKey() {\n  return Math.random();\n}\n\nexport function useForceUpdate() {\n  const [state, setState] = useState(0);\n  const update = useCallback(() => {\n    setState((prev) => prev + 1);\n  }, []);\n  return update;\n}\n\n// 规范style，如传入的lineHeight只是数字，没有px，则这里加上\nexport function formatStyle(style, noNeedPos) {\n  let newStyle = {...style};\n\n  newStyle = checkPx(newStyle, [\"lineHeight\", \"fontSize\"]);\n\n  delete newStyle.top;\n  delete newStyle.right;\n  delete newStyle.bottom;\n  delete newStyle.left;\n\n  return newStyle;\n}\n\nfunction checkPx(newStyle, names) {\n  names.map((name) => {\n    if (newStyle[name] && (newStyle[name] + \"\").indexOf(\"px\") === -1) {\n      newStyle[name] = newStyle[name] + \"px\";\n    }\n  });\n  return newStyle;\n}\n\n// 节流， 默认500ms\nexport function throttle(func, wait = 100) {\n  let timer = 0;\n  return (...args) => {\n    if (timer) {\n      return;\n    }\n    timer = window.setTimeout(() => {\n      func(...args);\n      timer = 0;\n    }, wait);\n  };\n}\n","/Users/gaoshaoyun/workspace/react/template/src/components/Demo/index.js",["89","90","91","92","93","94"],"import React, {Component} from \"react\";\nimport classnames from \"classnames\";\nimport styles from \"./index.less\";\n\nconst STATUS_TODO = \"STATUS_TODO\";\nconst STATUS_DOING = \"STATUS_DOING\";\nconst STATUS_DONE = \"STATUS_DONE\";\n\nconst STATUS_CODE = {\n  STATUS_TODO: \"待处理\",\n  STATUS_DOING: \"进行中\",\n  STATUS_DONE: \"已完成\",\n};\nlet tasks = [\n  {\n    id: 0,\n    status: STATUS_TODO,\n    title: \"每周七天阅读五次，每次阅读完要做100字的读书笔记\",\n    username: \"小夏\",\n    point: 10,\n  },\n  {\n    id: 1,\n    status: STATUS_TODO,\n    title: \"每周七天健身4次，每次健身时间需要大于20分钟\",\n    username: \"橘子🍊\",\n    point: 5,\n  },\n  {\n    id: 2,\n    status: STATUS_TODO,\n    title: \"单词*100\",\n    username: \"┑(￣Д ￣)┍\",\n    point: 2,\n  },\n  {\n    id: 3,\n    status: STATUS_TODO,\n    title: \"单词*150\",\n    username: \"┑(￣Д ￣)┍\",\n    point: 2,\n  },\n  {\n    id: 4,\n    status: STATUS_TODO,\n    title: \"单词*200\",\n    username: \"┑(￣Д ￣)┍\",\n    point: 2,\n  },\n  {\n    id: 5,\n    status: STATUS_TODO,\n    title: \"单词*250\",\n    username: \"┑(￣Д ￣)┍\",\n    point: 2,\n  },\n];\n\nclass TaskItem extends React.Component {\n  handleDragStart = (e) => {\n    this.props.onDragStart(this.props.id);\n  };\n  render() {\n    let {id, title, point, username, active, onDragEnd} = this.props;\n    return (\n      <div\n        onDragStart={this.handleDragStart}\n        onDragEnd={onDragEnd}\n        id={`item-${id}`}\n        className={classnames(styles.item, (styles.active: active))}\n        draggable=\"true\">\n        <header className={styles[\"item-header\"]}>\n          <span className={styles[\"item-header-username\"]}>{username}</span>\n          <span className={styles[\"item-header-point\"]}>{point}</span>\n        </header>\n        <main className={styles[\"item-main\"]}>{title}</main>\n      </div>\n    );\n  }\n}\n\nclass _TaskCol extends React.Component {\n  state = {\n    _in: false,\n  };\n  handleDragEnter = (e) => {\n    e.preventDefault();\n    if (this.props.canDragIn) {\n      this.setState({\n        _in: true,\n      });\n    }\n  };\n  handleDragLeave = (e) => {\n    e.preventDefault();\n    if (this.props.canDragIn) {\n      this.setState({\n        _in: false,\n      });\n    }\n  };\n  handleDrop = (e) => {\n    e.preventDefault();\n    this.props.dragTo(this.props.status);\n    this.setState({\n      _in: false,\n    });\n  };\n  render() {\n    let {status, children} = this.props;\n    const {_in} = this.state;\n    return (\n      <div\n        id={`col-${status}`}\n        className={styles.col}\n        onDragEnter={this.handleDragEnter}\n        onDragLeave={this.handleDragLeave}\n        onDragOver={this.handleDragEnter}\n        onDrop={this.handleDrop}\n        draggable=\"true\">\n        <header className={styles[\"col-header\"]}>{STATUS_CODE[status]}</header>\n        <main className={classnames(styles[\"col-main\"], (\"active\": _in))}>\n          {children}\n        </main>\n      </div>\n    );\n  }\n}\n\nclass TaskCol extends Component {\n  state = {_in: false};\n  handleDragEnter = (e) => {\n    e.preventDefault();\n    if (this.props.canDragIn) {\n      this.setState({_in: true});\n    }\n  };\n\n  handleDragLeave = (e) => {\n    e.preventDefault();\n    if (this.props.canDragIn) {\n      this.setState({_in: false});\n    }\n  };\n\n  render() {\n    const {status, children} = this.props;\n    const {_in} = this.state;\n    return (\n      <div\n        className={styles.col}\n        onDragEnter={this.handleDragEnter}\n        onDragLeave={this.handleDragLeave}\n        onDragOver={this.handleDragEnter}>\n        <header className={styles[\"col-header\"]}>{STATUS_CODE[status]}</header>\n        <div className={classnames(styles[\"col-main\"], (\"active\": _in))}>\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default class Demo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tasks: tasks,\n      activeId: null,\n    };\n  }\n\n  dragTo = (status) => {\n    const {tasks, activeId} = this.state;\n    let task = tasks[activeId];\n    if (task.status !== status) {\n      task.status = status;\n      this.setState({tasks});\n    }\n    this.cancelSelect();\n  };\n\n  cancelSelect = () => {\n    this.setState({\n      activeId: null,\n    });\n  };\n\n  render() {\n    const {task, activeId} = this.state;\n    return (\n      <div className={styles[\"task-wrapper\"]}>\n        {Object.keys(STATUS_CODE).map((status) => (\n          <TaskCol\n            key={status}\n            status={status}\n            dragTo={this.dragTo}\n            canDragIn={activeId !== null && tasks[activeId].status !== status}>\n            {tasks\n              .filter((task) => task.status === status)\n              .map((task) => (\n                <TaskItem\n                  key={task.id}\n                  {...task}\n                  active={activeId === tasks.id}\n                  onDragStart={() => {\n                    this.setState({activeId: task.id});\n                  }}\n                  onDragEnd={this.cancelSelect}\n                />\n              ))}\n          </TaskCol>\n        ))}\n      </div>\n    );\n  }\n}\n\n// export default\nclass _Demo extends React.Component {\n  state = {\n    tasks: tasks,\n    activeId: null,\n  };\n  /**\n   * 传入被拖拽任务项的 id\n   */\n  onDragStart = (id) => {\n    this.setState({\n      activeId: id,\n    });\n  };\n\n  dragTo = (status) => {\n    let {tasks, activeId} = this.state;\n    let task = tasks[activeId];\n    if (task.status !== status) {\n      task.status = status;\n      this.setState({\n        tasks: tasks,\n      });\n    }\n    this.cancelSelect();\n  };\n\n  cancelSelect = () => {\n    this.setState({\n      activeId: null,\n    });\n  };\n\n  render() {\n    let {tasks, activeId} = this.state;\n    let {onDragStart, onDragEnd, cancelSelect} = this;\n    return (\n      <div className={styles[\"task-wrapper\"]}>\n        {Object.keys(STATUS_CODE).map((status) => (\n          <TaskCol\n            status={status}\n            key={status}\n            dragTo={this.dragTo}\n            canDragIn={activeId != null && tasks[activeId].status !== status}>\n            {tasks\n              .filter((t) => t.status === status)\n              .map((t) => (\n                <TaskItem\n                  key={t.id}\n                  active={t.id === activeId}\n                  id={t.id}\n                  title={t.title}\n                  point={t.point}\n                  username={t.username}\n                  onDragStart={onDragStart}\n                  onDragEnd={cancelSelect}\n                />\n              ))}\n          </TaskCol>\n        ))}\n      </div>\n    );\n  }\n}\n","/Users/gaoshaoyun/workspace/react/template/src/components/Button/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/hooks/index.js",["95","96","97"],"import React, {useState, useCallback} from \"react\";\n\nfunction useForceUpdate() {\n  const [state, setState] = useState(0);\n  const update = useCallback(() => {\n    setState((prev) => prev + 1);\n  }, []);\n\n  return update;\n}\n\nexport default {\n  useForceUpdate,\n};\n","/Users/gaoshaoyun/workspace/react/template/src/components/EditCmp/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/Draggable/ContextMenu/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/components/Img/index.js",["98"],"import {formatStyle} from \"../../utils\";\nimport styles from \"./index.less\";\n\nexport default function Img(data) {\n  const {style} = data;\n\n  return <img className={styles.main} style={style} src={data.value} alt=\"\" />;\n}\n","/Users/gaoshaoyun/workspace/react/template/src/react-app-env.d.ts",[],"/Users/gaoshaoyun/workspace/react/template/src/components/Context/index.js",[],"/Users/gaoshaoyun/workspace/react/template/src/store/globalCanvas.js",["99"],"import {useRef} from \"react\";\nclass Canvas {\n  constructor() {\n    this.cmps = [];\n    this.listeners = [];\n    this.selectedCmp = null;\n  }\n\n  getCmps = () => {\n    return [...this.cmps];\n  };\n\n  setCmps = (_cmps) => {\n    this.cmps = [..._cmps];\n    this.runListeners();\n  };\n  addCmp = (_cmp) => {\n    this.cmps.push(_cmp);\n    this.runListeners();\n    this.selectedCmp = _cmp;\n  };\n  updateCmp = (_cmp) => {\n    let cmps = this.cmps;\n    for (let i = 0; i < cmps.length; i++) {\n      if (cmps[i].onlyKey === _cmp.onlyKey) {\n        this.cmps[i] = _cmp;\n        break;\n      }\n    }\n    this.runListeners();\n  };\n\n  // updateCmpStyle = (_cmp, _style) => {\n  //   this.updateCmp({\n  //     ..._cmp,\n  //     data: {..._cmp.data, style: {..._cmp.data.style, ..._style}},\n  //   });\n  // };\n\n  /** 选中组件的操作 **/\n\n  getSelectedCmp = () => {\n    return this.selectedCmp;\n  };\n\n  setSelectedCmp = (_cmp) => {\n    if (this.selectedCmp === _cmp) {\n      return;\n    }\n    this.selectedCmp = _cmp;\n    this.runListeners();\n  };\n\n  // updateSelectedCmp = (_cmp) => {\n  //   this.setSelectedCmp(_cmp);\n  //   this.updateCmp(_cmp);\n  //   this.runListeners();\n  // };\n\n  updateSelectedCmpStyle = (_style) => {\n    let _cmp = this.getSelectedCmp();\n    let cmp = {\n      ..._cmp,\n      data: {..._cmp.data, style: {..._cmp.data.style, ..._style}},\n    };\n\n    this.selectedCmp = cmp;\n    this.updateCmp(cmp);\n  };\n\n  updateSelectedCmpValue = (value) => {\n    let _cmp = this.getSelectedCmp();\n    let cmp = {\n      ..._cmp,\n      data: {\n        ..._cmp.data,\n        value,\n      },\n    };\n\n    this.selectedCmp = cmp;\n    this.updateCmp(cmp);\n  };\n\n  // 删除组件\n  deleteSelectedCmp = (_cmp) => {\n    this.setSelectedCmp(null);\n    this.setCmps(this.cmps.filter((cmp) => cmp !== _cmp));\n  };\n\n  // 交换i、j位置的元素\n  changeCmpIndex = (i, j = this.cmps.length - 1) => {\n    if (i === j) {\n      return;\n    }\n\n    let newCmps = this.getCmps();\n    let tem = newCmps[i];\n    newCmps[i] = newCmps[j];\n    newCmps[j] = tem;\n    this.setCmps(newCmps);\n  };\n\n  runListeners = () => {\n    this.listeners.forEach((listener) => listener());\n  };\n\n  subscribe = (listener) => {\n    this.listeners.push(listener);\n    return () => {\n      this.listeners = this.listeners.filter((lis) => lis !== listener);\n    };\n  };\n\n  getCanvas = () => {\n    const returnFuncs = [\n      \"getCmps\",\n      \"setCmps\",\n      \"addCmp\",\n      \"getSelectedCmp\",\n      \"setSelectedCmp\",\n      // \"updateSelectedCmp\",\n      \"updateSelectedCmpStyle\",\n      \"updateSelectedCmpValue\",\n      \"deleteSelectedCmp\",\n      \"changeCmpIndex\",\n      \"subscribe\",\n    ];\n    const obj = {};\n    returnFuncs.map((func) => {\n      obj[func] = this[func];\n    });\n    return obj;\n  };\n}\n\n// export const globalCanvas = new Canvas();\n\nexport function useCanvas(canvas) {\n  const canvasRef = useRef();\n\n  if (!canvasRef.current) {\n    if (canvas) {\n      canvasRef.current = canvas;\n    } else {\n      const globalCanvas = new Canvas();\n      canvasRef.current = globalCanvas.getCanvas();\n    }\n  }\n  return canvasRef.current;\n}\n",{"ruleId":"100","severity":1,"message":"101","line":1,"column":9,"nodeType":"102","messageId":"103","endLine":1,"endColumn":17},{"ruleId":"100","severity":1,"message":"104","line":4,"column":9,"nodeType":"102","messageId":"103","endLine":4,"endColumn":17},{"ruleId":"100","severity":1,"message":"105","line":7,"column":7,"nodeType":"102","messageId":"103","endLine":7,"endColumn":18},{"ruleId":"100","severity":1,"message":"106","line":1,"column":20,"nodeType":"102","messageId":"103","endLine":1,"endColumn":30},{"ruleId":"107","severity":1,"message":"108","line":16,"column":3,"nodeType":"109","messageId":"110","endLine":25,"endColumn":4},{"ruleId":"111","severity":1,"message":"112","line":43,"column":6,"nodeType":"113","endLine":43,"endColumn":8,"suggestions":"114"},{"ruleId":"100","severity":1,"message":"115","line":51,"column":11,"nodeType":"102","messageId":"103","endLine":51,"endColumn":17},{"ruleId":"100","severity":1,"message":"116","line":8,"column":10,"nodeType":"102","messageId":"103","endLine":8,"endColumn":15},{"ruleId":"117","severity":1,"message":"118","line":30,"column":20,"nodeType":"119","messageId":"120","endLine":30,"endColumn":22},{"ruleId":"100","severity":1,"message":"121","line":6,"column":7,"nodeType":"102","messageId":"103","endLine":6,"endColumn":19},{"ruleId":"100","severity":1,"message":"122","line":7,"column":7,"nodeType":"102","messageId":"103","endLine":7,"endColumn":18},{"ruleId":"100","severity":1,"message":"123","line":82,"column":7,"nodeType":"102","messageId":"103","endLine":82,"endColumn":15},{"ruleId":"100","severity":1,"message":"124","line":190,"column":12,"nodeType":"102","messageId":"103","endLine":190,"endColumn":16},{"ruleId":"100","severity":1,"message":"125","line":220,"column":7,"nodeType":"102","messageId":"103","endLine":220,"endColumn":12},{"ruleId":"100","severity":1,"message":"126","line":254,"column":23,"nodeType":"102","messageId":"103","endLine":254,"endColumn":32},{"ruleId":"100","severity":1,"message":"127","line":1,"column":8,"nodeType":"102","messageId":"103","endLine":1,"endColumn":13},{"ruleId":"100","severity":1,"message":"116","line":4,"column":10,"nodeType":"102","messageId":"103","endLine":4,"endColumn":15},{"ruleId":"128","severity":1,"message":"129","line":12,"column":1,"nodeType":"130","endLine":14,"endColumn":3},{"ruleId":"100","severity":1,"message":"131","line":1,"column":9,"nodeType":"102","messageId":"103","endLine":1,"endColumn":20},{"ruleId":"117","severity":1,"message":"118","line":130,"column":28,"nodeType":"119","messageId":"120","endLine":130,"endColumn":30},"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'Provider' is defined but never used.","'commomStyle' is assigned a value but never used.","'useReducer' is defined but never used.","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'forceUpdate' and 'globalCanvas'. Either include them or remove the dependency array.","ArrayExpression",["132"],"'target' is assigned a value but never used.","'state' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'STATUS_DOING' is assigned a value but never used.","'STATUS_DONE' is assigned a value but never used.","'_TaskCol' is defined but never used.","'task' is assigned a value but never used.","'_Demo' is defined but never used.","'onDragEnd' is assigned a value but never used.","'React' is defined but never used.","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","'formatStyle' is defined but never used.",{"desc":"133","fix":"134"},"Update the dependencies array to be: [forceUpdate, globalCanvas]",{"range":"135","text":"136"},[1095,1097],"[forceUpdate, globalCanvas]"]